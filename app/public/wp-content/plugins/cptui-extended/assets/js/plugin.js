window.cptuiShortcodeBuilder={},function(window,$,that){that.init=function(){that.cache(),that.bindEvents()},that.cache=function(){that.$c={window:$(window),body:$("body"),postTypeSelect:$("#cptui_posttype"),shortcodeSelect:$("#cptui_shortcode"),shortcode:"",posttype:"",wdsShortcodeButtonModal:$("#scb-modal")}},that.bindEvents=function(){that.$c.body.on("shortcode_button:open",function(){($(".so-panels-dialog").length||"hidden"==that.$c.body.css("overflow"))&&that.$c.body.css("overflow","visible"),that.metaShowHide($("#none")),$("#shortcode_cptui").trigger("reset"),$("#cptui-form input[type=checkbox]").prop("checked",!1),$("#cptui-form input[type=radio]").prop("checked",!1)}),that.metaShowHide($("#none")),$("select[name=cptui_shortcode]").on('change',function(){$("#cptui-form input[type=checkbox]").prop("checked",!1),$("#cptui-form input[type=radio]").prop("checked",!1);var shortcodeSelect=that.$c.shortcodeSelect.val();that.$c.shortcode=shortcodeSelect;var showThese=$("#"+shortcodeSelect+"_repeat");if(that.metaShowHide(showThese),"list_shortcode"===shortcodeSelect){$("#list_shortcode_0_list_type1").prop("checked",!0);var postTypeData=$("#list_shortcode_0_attached_post").data("search");postTypeData.posttype=that.$c.posttype,$("#list_shortcode_0_attached_post").data("search",postTypeData)}if("default_shortcode"===shortcodeSelect){var postTypeData=$("#default_shortcode_0_attached_post").data("search");postTypeData.posttype=that.$c.posttype,$("#default_shortcode_0_attached_post").data("search",postTypeData)}if("slider_shortcode"===shortcodeSelect){var postTypeData=$("#slider_shortcode_0_attached_post").data("search");postTypeData.posttype=that.$c.posttype,$("#slider_shortcode_0_attached_post").data("search",postTypeData)}if(void 0!==cptui.taxonomy[that.$c.posttype]){$("ul.cmb2-checkbox-list").html("");var taxul=$("#"+that.$c.shortcode+"_repeat ul.cmb2-checkbox-list");$.each(cptui.taxonomy[that.$c.posttype],function(key,value){taxul.append("<h3>"+key+"</h3>"),$.each(cptui.taxonomy[that.$c.posttype][key],function(key,value){taxul.append($('<li><input type="checkbox" class="cmb2-option" name="'+that.$c.shortcode+"[0][taxonomy][taxonomy-"+value.taxonomy+'][]" id="'+that.$c.shortcode+"_0_taxonomy_"+value.slug+'" value="'+value.slug+'"><label for="'+that.$c.shortcode+"_0_taxonomy_"+value.slug+'">'+value.name+"</label></li>"))})})}}),$(".cmb2-id-post-cards-shortcode-0-card-layout").on('change',function(){$("#post_cards_shortcode_0_card_layout1").is(":checked")||$("#post_cards_shortcode_0_card_layout3").is(":checked")?$(".cmb2-id-post-cards-shortcode-0-show-title, .cmb2-id-post-cards-shortcode-0-show-categories, .cmb2-id-post-cards-shortcode-0-show-excerpt").hide():$(".cmb2-id-post-cards-shortcode-0-show-title, .cmb2-id-post-cards-shortcode-0-show-categories, .cmb2-id-post-cards-shortcode-0-show-excerpt").show(),$("#post_cards_shortcode_0_card_layout2").is(":checked")&&$(".cmb2-id-post-cards-shortcode-0-show-title, .cmb2-id-post-cards-shortcode-0-show-categories, .cmb2-id-post-cards-shortcode-0-show-excerpt").show()}),$("select[name=cptui_posttype]").on('change',function(){that.metaShowHide($("#none")),$("#cptui_shortcode option").remove(),$("#cptui_shortcode").append($('<option value="none">None</option>')),$.each(cptui.shortcodes.all,function(key,value){$("#cptui_shortcode").append($('<option value="'+key+'">'+value+"</option>"))}),that.$c.posttype=this.value;var post_type=this.value;void 0!==cptui.shortcodes[post_type]&&$.each(cptui.shortcodes[post_type],function(key,value){$("#cptui_shortcode").append($("<option></option>").attr("value",key).text(value))}),"page"===post_type?($(".cmb2-id-grid-shortcode-0-show-categories, .cmb2-id-post-cards-shortcode-0-show-categories").hide(),$(".cmb2-id-grid-shortcode-0-show-categories").hide()):($(".cmb2-id-grid-shortcode-0-show-categories, .cmb2-id-post-cards-shortcode-0-show-categories").show(),$(".cmb2-id-grid-shortcode-0-show-categories").show())}),$(".cmb2-id-featured-plus-shortcode-0-amount").hide(),$('input[name="featured_plus_shortcode[0][featured_plus_type]"]').on('change',function(){"top"===$('input[name="featured_plus_shortcode[0][featured_plus_type]"]:checked').val()?$(".cmb2-id-featured-plus-shortcode-0-amount").show():$(".cmb2-id-featured-plus-shortcode-0-amount").hide()})},that.metaShowHide=function(showem){var hideThese=$("#shortcode_cptui .cmb-repeatable-group").not(showem);showem.slideDown("slow"),hideThese.hide()},$(that.init)}(window,jQuery,window.cptuiShortcodeBuilder);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNwdHVpZXh0LmpzIl0sIm5hbWVzIjpbIndpbmRvdyIsImNwdHVpU2hvcnRjb2RlQnVpbGRlciIsIiQiLCJ0aGF0IiwiaW5pdCIsImNhY2hlIiwiYmluZEV2ZW50cyIsIiRjIiwiYm9keSIsInBvc3RUeXBlU2VsZWN0Iiwic2hvcnRjb2RlU2VsZWN0Iiwic2hvcnRjb2RlIiwicG9zdHR5cGUiLCJ3ZHNTaG9ydGNvZGVCdXR0b25Nb2RhbCIsIm9uIiwibGVuZ3RoIiwiY3NzIiwibWV0YVNob3dIaWRlIiwidHJpZ2dlciIsInByb3AiLCJjaGFuZ2UiLCJ2YWwiLCJzaG93VGhlc2UiLCJwb3N0VHlwZURhdGEiLCJkYXRhIiwiY3B0dWkiLCJ0YXhvbm9teSIsImh0bWwiLCJ0YXh1bCIsImVhY2giLCJrZXkiLCJ2YWx1ZSIsImFwcGVuZCIsInNsdWciLCJuYW1lIiwiaXMiLCJoaWRlIiwic2hvdyIsInJlbW92ZSIsInNob3J0Y29kZXMiLCJhbGwiLCJ0aGlzIiwicG9zdF90eXBlIiwiYXR0ciIsInRleHQiLCJzaG93ZW0iLCJoaWRlVGhlc2UiLCJub3QiLCJzbGlkZURvd24iLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJBQUFBQSxPQUFPQyx5QkFDTixTQUFZRCxPQUFRRSxFQUFHQyxNQUd0QkEsS0FBS0MsS0FBTyxXQUNYRCxLQUFLRSxRQUNMRixLQUFLRyxjQUlOSCxLQUFLRSxNQUFRLFdBQ1pGLEtBQUtJLElBQ0pQLE9BQVFFLEVBQUdGLFFBQ1hRLEtBQU1OLEVBQUcsUUFDVE8sZUFBZ0JQLEVBQUUsbUJBQ2xCUSxnQkFBaUJSLEVBQUUsb0JBQ25CUyxVQUFXLEdBQ1hDLFNBQVUsR0FDVkMsd0JBQXlCWCxFQUFFLGdCQUs3QkMsS0FBS0csV0FBYSxXQUVqQkgsS0FBS0ksR0FBR0MsS0FBS00sR0FBSSx3QkFBeUIsWUFHcENaLEVBQUcscUJBQXNCYSxRQUE0QyxVQUFsQ1osS0FBS0ksR0FBR0MsS0FBS1EsSUFBSyxjQUN6RGIsS0FBS0ksR0FBR0MsS0FBS1EsSUFB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QUUscUJBQ1R5QyxLQUFLLFFBQVFiLEtBQ2JjLEtBQUtiLFVBSVosU0FBZFcsV0FDSnhDLEVBQUcsOEZBQStGa0MsT0FDbkZsQyxFQUFHLDZDQUE4Q2tDLFNBRWhFbEMsRUFBRyw4RkFBK0ZtQyxPQUNuRm5DLEVBQUcsNkNBQThDbUMsVUFLbEVuQyxFQUFFLDZDQUE2Q2tDLE9BRS9DbEMsRUFBRSxnRUFBZ0VrQixPQUFPLFdBSTFDLFFBRkhsQixFQUFHLHdFQUF5RW1CLE1BR3RHbkIsRUFBRSw2Q0FBNkNtQyxPQUUvQ25DLEVBQUUsNkNBQTZDa0MsVUFNNUNqQyxLQUFLYyxhQUFlLFNBQVM0QixRQUN6QixHQUFJQyxXQUFZNUMsRUFBRSwwQ0FBMEM2QyxJQUFJRixPQUNoRUEsUUFBT0csVUFBVSxRQUNqQkYsVUFBVVYsUUFNcEJsQyxFQUFHQyxLQUFLQyxPQUVMSixPQUFRaUQsT0FBUWpELE9BQU9DIiwiZmlsZSI6InBsdWdpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIndpbmRvdy5jcHR1aVNob3J0Y29kZUJ1aWxkZXIgPSB7fTtcblx0KCBmdW5jdGlvbiggd2luZG93LCAkLCB0aGF0ICkge1xuXG5cdFx0Ly8gQ29uc3RydWN0b3IuXG5cdFx0dGhhdC5pbml0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGF0LmNhY2hlKCk7XG5cdFx0XHR0aGF0LmJpbmRFdmVudHMoKTtcblx0XHR9XG5cblx0XHQvLyBDYWNoZSBhbGwgdGhlIHRoaW5ncy5cblx0XHR0aGF0LmNhY2hlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGF0LiRjID0ge1xuXHRcdFx0XHR3aW5kb3c6ICQoIHdpbmRvdyApLFxuXHRcdFx0XHRib2R5OiAkKCAnYm9keScgKSxcblx0XHRcdFx0cG9zdFR5cGVTZWxlY3Q6ICQoJyNjcHR1aV9wb3N0dHlwZScpLFxuXHRcdFx0XHRzaG9ydGNvZGVTZWxlY3Q6ICQoJyNjcHR1aV9zaG9ydGNvZGUnKSxcblx0XHRcdFx0c2hvcnRjb2RlOiAnJyxcblx0XHRcdFx0cG9zdHR5cGU6ICcnLFxuXHRcdFx0XHR3ZHNTaG9ydGNvZGVCdXR0b25Nb2RhbDogJCgnI3NjYi1tb2RhbCcpXG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdC8vIENvbWJpbmUgYWxsIGV2ZW50cy5cblx0XHR0aGF0LmJpbmRFdmVudHMgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0dGhhdC4kYy5ib2R5Lm9uKCAnc2hvcnRjb2RlX2J1dHRvbjpvcGVuJywgZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0Ly8gQ2hlY2sgaWYgU2l0ZSBPcmlnaW4ncyBQYWdlIEJ1aWxkZXIgZGlhbG9nIGV4aXN0cyBhbmQgaWYgaXQgaXMgb3ZlcnJpZGluZyB0aGUgYm9keSBvdmVyZmxvd1xuXHRcdFx0XHRpZiAoICQoICcuc28tcGFuZWxzLWRpYWxvZycgKS5sZW5ndGggfHwgdGhhdC4kYy5ib2R5LmNzcyggJ292ZXJmbG93JyApID09ICdoaWRkZW4nICkge1xuXHRcdFx0XHRcdHRoYXQuJGMuYm9keS5jc3MoICdvdmVyZmxvdycsICd2aXNpYmxlJyApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhhdC5tZXRhU2hvd0hpZGUoICQoJyNub25lJykgKTtcblx0XHRcdFx0JCgnI3Nob3J0Y29kZV9jcHR1aScpLnRyaWdnZXIoJ3Jlc2V0Jyk7XG5cdFx0XHRcdCQoICcjY3B0dWktZm9ybSBpbnB1dFt0eXBlPWNoZWNrYm94XScgKS5wcm9wKCAnY2hlY2tlZCcsIGZhbHNlICk7XG5cdFx0XHRcdCQoICcjY3B0dWktZm9ybSBpbnB1dFt0eXBlPXJhZGlvXScgKS5wcm9wKCAnY2hlY2tlZCcsIGZhbHNlICk7XG5cdFx0XHR9ICk7XG5cbiAgICAgICAgICAgIHRoYXQubWV0YVNob3dIaWRlKCAkKCcjbm9uZScpICk7XG5cblx0XHRcdC8vIHNob3cvaGlkZSBtZXRhIGJveGVzIGJhc2VkIG9uIHNlbGVjdCBvdHBpb25cblx0XHRcdCQoJ3NlbGVjdFtuYW1lPWNwdHVpX3Nob3J0Y29kZV0nKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCQoICcjY3B0dWktZm9ybSBpbnB1dFt0eXBlPWNoZWNrYm94XScgKS5wcm9wKCAnY2hlY2tlZCcsIGZhbHNlICk7XG5cdFx0XHRcdCQoICcjY3B0dWktZm9ybSBpbnB1dFt0eXBlPXJhZGlvXScgKS5wcm9wKCAnY2hlY2tlZCcsIGZhbHNlICk7XG4gICAgICAgICAgICAgICAgdmFyIHNob3J0Y29kZVNlbGVjdCA9IHRoYXQuJGMuc2hvcnRjb2RlU2VsZWN0LnZhbCgpO1xuXHRcdFx0XHR0aGF0LiRjLnNob3J0Y29kZSA9IHNob3J0Y29kZVNlbGVjdDtcblxuICAgICAgICAgICAgICAgIHZhciBzaG93VGhlc2UgPSAkKCcjJyArIHNob3J0Y29kZVNlbGVjdCArICdfcmVwZWF0JyApO1xuICAgICAgICAgICAgICAgIHRoYXQubWV0YVNob3dIaWRlKHNob3dUaGVzZSk7XG5cblx0XHRcdFx0aWYgKCAnbGlzdF9zaG9ydGNvZGUnID09PSBzaG9ydGNvZGVTZWxlY3QgKSB7XG5cdFx0XHRcdFx0JCggJyNsaXN0X3Nob3J0Y29kZV8wX2xpc3RfdHlwZTEnICkucHJvcCggJ2NoZWNrZWQnLCB0cnVlICk7XG5cdFx0XHRcdFx0dmFyIHBvc3RUeXBlRGF0YSA9ICQoJyNsaXN0X3Nob3J0Y29kZV8wX2F0dGFjaGVkX3Bvc3QnKS5kYXRhKCdzZWFyY2gnKTtcblx0XHRcdFx0XHRwb3N0VHlwZURhdGEucG9zdHR5cGUgPSB0aGF0LiRjLnBvc3R0eXBlO1xuXHRcdFx0XHRcdCQoJyNsaXN0X3Nob3J0Y29kZV8wX2F0dGFjaGVkX3Bvc3QnKS5kYXRhKCdzZWFyY2gnLCBwb3N0VHlwZURhdGEpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIHN3YXAgcG9zdCB0eXBlIGluIGRhdGEtc2VhcmNoIHZhbHVlXG5cdFx0XHRcdGlmICggJ2RlZmF1bHRfc2hvcnRjb2RlJyA9PT0gc2hvcnRjb2RlU2VsZWN0ICkge1xuXHRcdFx0XHRcdHZhciBwb3N0VHlwZURhdGEgPSAkKCcjZGVmYXVsdF9zaG9ydGNvZGVfMF9hdHRhY2hlZF9wb3N0JykuZGF0YSgnc2VhcmNoJyk7XG5cdFx0XHRcdFx0cG9zdFR5cGVEYXRhLnBvc3R0eXBlID0gdGhhdC4kYy5wb3N0dHlwZTtcblx0XHRcdFx0XHQkKCcjZGVmYXVsdF9zaG9ydGNvZGVfMF9hdHRhY2hlZF9wb3N0JykuZGF0YSgnc2VhcmNoJywgcG9zdFR5cGVEYXRhKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggJ3NsaWRlcl9zaG9ydGNvZGUnID09PSBzaG9ydGNvZGVTZWxlY3QgKSB7XG5cdFx0XHRcdFx0dmFyIHBvc3RUeXBlRGF0YSA9ICQoJyNzbGlkZXJfc2hvcnRjb2RlXzBfYXR0YWNoZWRfcG9zdCcpLmRhdGEoJ3NlYXJjaCcpO1xuXHRcdFx0XHRcdHBvc3RUeXBlRGF0YS5wb3N0dHlwZSA9IHRoYXQuJGMucG9zdHR5cGU7XG5cdFx0XHRcdFx0JCgnI3NsaWRlcl9zaG9ydGNvZGVfMF9hdHRhY2hlZF9wb3N0JykuZGF0YSgnc2VhcmNoJywgcG9zdFR5cGVEYXRhKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggdHlwZW9mIGNwdHVpLnRheG9ub215W3RoYXQuJGMucG9zdHR5cGVdICE9PSAndW5kZWZpbmVkJyApIHtcblxuXHRcdFx0XHRcdCQoJ3VsLmNtYjItY2hlY2tib3gtbGlzdCcpLmh0bWwoJycpO1xuXHRcdFx0XHRcdHZhciB0YXh1bCA9ICQoJyMnKyB0aGF0LiRjLnNob3J0Y29kZSArJ19yZXBlYXQgdWwuY21iMi1jaGVja2JveC1saXN0Jyk7XG5cdFx0XHRcdFx0dmFyIHRheCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAkLmVhY2goIGNwdHVpLnRheG9ub215W3RoYXQuJGMucG9zdHR5cGVdLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG5cblx0XHRcdFx0XHRcdHRheHVsLmFwcGVuZCgnPGgzPicgKyBrZXkgKyAnPC9oMz4nKTtcblx0XHRcdFx0XHRcdCQuZWFjaCggY3B0dWkudGF4b25vbXlbdGhhdC4kYy5wb3N0dHlwZV1ba2V5XSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuXHRcdFx0XHRcdFx0XHR0YXh1bC5hcHBlbmQoICQoJzxsaT48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2xhc3M9XCJjbWIyLW9wdGlvblwiIG5hbWU9XCInICsgdGhhdC4kYy5zaG9ydGNvZGUgICsgJ1swXVt0YXhvbm9teV1bdGF4b25vbXktJysgdmFsdWUudGF4b25vbXkgKyddW11cIiBpZD1cIicgKyB0aGF0LiRjLnNob3J0Y29kZSAgKyAnXzBfdGF4b25vbXlfJyArIHZhbHVlLnNsdWcgKyAnXCIgdmFsdWU9XCInICsgdmFsdWUuc2x1ZyArICdcIj48bGFiZWwgZm9yPVwiJyArIHRoYXQuJGMuc2hvcnRjb2RlICArICdfMF90YXhvbm9teV8nICsgdmFsdWUuc2x1ZyArICdcIj4nICsgdmFsdWUubmFtZSArICc8L2xhYmVsPjwvbGk+JykgKTtcblx0XHRcdFx0XHRcdH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cdFx0XHR9KTtcblxuXHRcdFx0JCgnLmNtYjItaWQtcG9zdC1jYXJkcy1zaG9ydGNvZGUtMC1jYXJkLWxheW91dCcpLmNoYW5nZShmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYoICQoICcjcG9zdF9jYXJkc19zaG9ydGNvZGVfMF9jYXJkX2xheW91dDEnICkuaXMoXCI6Y2hlY2tlZFwiKSB8fCAkKCAnI3Bvc3RfY2FyZHNfc2hvcnRjb2RlXzBfY2FyZF9sYXlvdXQzJyApLmlzKFwiOmNoZWNrZWRcIikgKSB7XG5cdFx0XHRcdFx0JCggJy5jbWIyLWlkLXBvc3QtY2FyZHMtc2hvcnRjb2RlLTAtc2hvdy10aXRsZSwgLmNtYjItaWQtcG9zdC1jYXJkcy1zaG9ydGNvZGUtMC1zaG93LWNhdGVnb3JpZXMsIC5jbWIyLWlkLXBvc3QtY2FyZHMtc2hvcnRjb2RlLTAtc2hvdy1leGNlcnB0JyApLmhpZGUoKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKCAnLmNtYjItaWQtcG9zdC1jYXJkcy1zaG9ydGNvZGUtMC1zaG93LXRpdGxlLCAuY21iMi1pZC1wb3N0LWNhcmRzLXNob3J0Y29kZS0wLXNob3ctY2F0ZWdvcmllcywgLmNtYjItaWQtcG9zdC1jYXJkcy1zaG9ydGNvZGUtMC1zaG93LWV4Y2VycHQnICkuc2hvdygpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKCAkKCAnI3Bvc3RfY2FyZHNfc2hvcnRjb2RlXzBfY2FyZF9sYXlvdXQyJyApLmlzKFwiOmNoZWNrZWRcIikgKSB7XG5cdFx0XHRcdFx0JCggJy5jbWIyLWlkLXBvc3QtY2FyZHMtc2hvcnRjb2RlLTAtc2hvdy10aXRsZSwgLmNtYjItaWQtcG9zdC1jYXJkcy1zaG9ydGNvZGUtMC1zaG93LWNhdGVnb3JpZXMsIC5jbWIyLWlkLXBvc3QtY2FyZHMtc2hvcnRjb2RlLTAtc2hvdy1leGNlcnB0JyApLnNob3coKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cbiAgICAgICAgICAgIC8vIENoYW5nZSBzaG9ydGNvZGUgc2VsZWN0IGJhc2VkIG9uIHBvc3QgdHlwZSBvcHRpb25cbiAgICAgICAgICAgICQoJ3NlbGVjdFtuYW1lPWNwdHVpX3Bvc3R0eXBlXScpLmNoYW5nZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0Lm1ldGFTaG93SGlkZSggJCgnI25vbmUnKSApO1xuICAgICAgICAgICAgICAgICQoJyNjcHR1aV9zaG9ydGNvZGUgb3B0aW9uJykucmVtb3ZlKCk7XG5cblx0XHRcdFx0JCgnI2NwdHVpX3Nob3J0Y29kZScpLmFwcGVuZCggJCgnPG9wdGlvbiB2YWx1ZT1cIm5vbmVcIj5Ob25lPC9vcHRpb24+JykgKTtcblx0XHRcdFx0JC5lYWNoKCBjcHR1aS5zaG9ydGNvZGVzLmFsbCwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuXHRcdFx0XHRcdCQoJyNjcHR1aV9zaG9ydGNvZGUnKS5hcHBlbmQoICQoJzxvcHRpb24gdmFsdWU9XCInKyBrZXkgKydcIj4nKyB2YWx1ZSArJzwvb3B0aW9uPicpICk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdHRoYXQuJGMucG9zdHR5cGUgPSB0aGlzLnZhbHVlO1xuXHRcdFx0XHR2YXIgcG9zdF90eXBlID0gdGhpcy52YWx1ZTtcblxuICAgICAgICAgICAgICAgIGlmICggdHlwZW9mIGNwdHVpLnNob3J0Y29kZXNbcG9zdF90eXBlXSAhPT0gJ3VuZGVmaW5lZCcgKSB7XG4gICAgICAgICAgICAgICAgICAgICQuZWFjaCggY3B0dWkuc2hvcnRjb2Rlc1twb3N0X3R5cGVdLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2NwdHVpX3Nob3J0Y29kZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPG9wdGlvbj48L29wdGlvbj4nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigndmFsdWUnLGtleSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRleHQodmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIHBvc3RfdHlwZSA9PT0gJ3BhZ2UnICkge1xuXHRcdFx0XHRcdCQoICcuY21iMi1pZC1ncmlkLXNob3J0Y29kZS0wLXNob3ctY2F0ZWdvcmllcywgLmNtYjItaWQtcG9zdC1jYXJkcy1zaG9ydGNvZGUtMC1zaG93LWNhdGVnb3JpZXMnICkuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAkKCAnLmNtYjItaWQtZ3JpZC1zaG9ydGNvZGUtMC1zaG93LWNhdGVnb3JpZXMnICkuaGlkZSgpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQoICcuY21iMi1pZC1ncmlkLXNob3J0Y29kZS0wLXNob3ctY2F0ZWdvcmllcywgLmNtYjItaWQtcG9zdC1jYXJkcy1zaG9ydGNvZGUtMC1zaG93LWNhdGVnb3JpZXMnICkuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAkKCAnLmNtYjItaWQtZ3JpZC1zaG9ydGNvZGUtMC1zaG93LWNhdGVnb3JpZXMnICkuc2hvdygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gSGlkZSBzaG9ydGNvZGUgYW1vdW50IGZpZWxkIGdyb3VwIGJ5IGRlZmF1bHQuXG5cdFx0XHQkKCcuY21iMi1pZC1mZWF0dXJlZC1wbHVzLXNob3J0Y29kZS0wLWFtb3VudCcpLmhpZGUoKTtcblxuXHRcdFx0JCgnaW5wdXRbbmFtZT1cImZlYXR1cmVkX3BsdXNfc2hvcnRjb2RlWzBdW2ZlYXR1cmVkX3BsdXNfdHlwZV1cIl0nKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0dmFyIGZlYXR1cmVkUGx1c0NoZWNrYm94ID0gJCggJ2lucHV0W25hbWU9XCJmZWF0dXJlZF9wbHVzX3Nob3J0Y29kZVswXVtmZWF0dXJlZF9wbHVzX3R5cGVdXCJdOmNoZWNrZWQnICkudmFsKClcblxuXHRcdFx0XHRpZiAoIGZlYXR1cmVkUGx1c0NoZWNrYm94ID09PSAndG9wJyApIHtcblx0XHRcdFx0XHQkKCcuY21iMi1pZC1mZWF0dXJlZC1wbHVzLXNob3J0Y29kZS0wLWFtb3VudCcpLnNob3coKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKCcuY21iMi1pZC1mZWF0dXJlZC1wbHVzLXNob3J0Y29kZS0wLWFtb3VudCcpLmhpZGUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGdW5jdGlvbiB0byBoYW5kbGUgd2hpY2ggaXRlbXMgc2hvdWxkIGJlIHNob3dpbmcvaGlkaW5nXG4gICAgICAgIHRoYXQubWV0YVNob3dIaWRlID0gZnVuY3Rpb24oc2hvd2VtKSB7XG4gICAgICAgICAgICB2YXIgaGlkZVRoZXNlID0gJCgnI3Nob3J0Y29kZV9jcHR1aSAuY21iLXJlcGVhdGFibGUtZ3JvdXAnKS5ub3Qoc2hvd2VtKTtcbiAgICAgICAgICAgIHNob3dlbS5zbGlkZURvd24oJ3Nsb3cnKTtcbiAgICAgICAgICAgIGhpZGVUaGVzZS5oaWRlKCk7XG4gICAgICAgIH1cblxuXG5cblx0XHQvLyBFbmdhZ2UhXG5cdFx0JCggdGhhdC5pbml0ICk7XG5cblx0fSkoIHdpbmRvdywgalF1ZXJ5LCB3aW5kb3cuY3B0dWlTaG9ydGNvZGVCdWlsZGVyICk7XG4iXX0=
